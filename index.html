<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>妖怪風カードメーカー</title>

<style>
body{
    margin:0;
    background:#111;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:20px;
    font-family:sans-serif;
}

.container{
    position:relative;
    width:95%;
    max-width:900px;
}

.background{
    width:100%;
    display:block;
}

/* ランク画像 */
.rankImg{
    position:absolute;
    top:-9%;
    right:25%;
    width:25%;
}

/* Sだけ位置変更 */
.rankImg[src="S.png"]{
    right:29%;
    top:-10%;
}

/* ===== 数字表示 ===== */
.numberArea{
    position:absolute;
    top:9%;
    left:67%;
    display:flex;
    gap:-5px;
    transform: scale(0.3);
    transform-origin: top left;
}

.numImg{
    width:50px;
    height:70px;
    object-fit:contain;
    margin-left:-1px;
}

.numImg:first-child{
    margin-left:0;
}

.numImg[src="1.png"]{
    width:41px;
    height:65px;
}

/* ===== キャラ表示 ===== */
.charArea{
    position:absolute;
    top:90%;
    left:90%;
    transform: translate(-50%, -50%);
    cursor: grab;

    
}

.charImg{
    width:50px;
    height:50px;
    object-fit:contain;
}

/* フォーム */
.form{
    margin-top:30px;
    width:95%;
    max-width:900px;
    background:white;
    padding:20px;
    border-radius:15px;
}

select,input{
    width:100%;
    padding:10px;
    border-radius:8px;
    margin-top:10px;
}
</style>
</head>

<body>

<div class="container">
    <img src="template.png" class="background">

    <!-- ランク -->
    <img src="E.png" id="rankImg" class="rankImg">

    <!-- 3桁番号 -->
    <div class="numberArea">
        <img id="num1" class="numImg" src="0.png">
        <img id="num2" class="numImg" src="0.png">
        <img id="num3" class="numImg" src="0.png">
    </div>

    <!-- キャラ表示 -->
    <div class="charArea" id="charArea">
        <img id="charImg" src="nyororon.png" class="charImg">
    </div>
</div>

<div class="form">
    <!-- ランク選択 -->
    <select id="inputRank" onchange="updateRank()">
        <option value="E">E</option>
        <option value="D">D</option>
        <option value="C">C</option>
        <option value="B">B</option>
        <option value="A">A</option>
        <option value="S">S</option>
    </select>

    <!-- 数字入力 -->
    <input type="text" id="inputNumber" maxlength="3" placeholder="000" oninput="updateNumber()">

    <!-- キャラ選択 -->
    <select id="inputChar" onchange="updateChar()">
        <option value="nyororon.png">ﾆｮﾛﾛﾝ</option>
        <option value="goketsu.png">ゴーケツ</option>
        <option value="fushigi.png">フシギ</option>
        <option value="purichi.png">プーリチ</option>
        <option value="pokapoka.png">ポカポカ</option>
        <option value="usurakage.png">ウスラカゲ</option>
        <option value="bukimi.png">ブキミ</option>
        <option value="isamashi.png">イサマシ</option>
    </select>
</div>

<script>
// ランク変更
function updateRank(){
    let rank = document.getElementById("inputRank").value;
    document.getElementById("rankImg").src = rank + ".png";
}

// 数字変更
function updateNumber(){
    let value = document.getElementById("inputNumber").value;
    value = value.replace(/[^0-9]/g, "");
    value = value.padStart(3, "0");

    document.getElementById("num1").src = value[0] + ".png";
    document.getElementById("num2").src = value[1] + ".png";
    document.getElementById("num3").src = value[2] + ".png";
}

// キャラ変更
function updateChar(){
    const char = document.getElementById("inputChar").value;
    document.getElementById("charImg").src = char;
}

// キャラをドラッグで移動
const charArea = document.getElementById("charArea");
let isDragging = false;
let offsetX, offsetY;

charArea.addEventListener("mousedown", e => {
    isDragging = true;
    offsetX = e.offsetX;
    offsetY = e.offsetY;
    charArea.style.cursor = "grabbing";
});

document.addEventListener("mousemove", e => {
    if(!isDragging) return;
    charArea.style.left = e.pageX - offsetX + "px";
    charArea.style.top  = e.pageY - offsetY + "px";
});

document.addEventListener("mouseup", e => {
    isDragging = false;
    charArea.style.cursor = "grab";
});
</script>

</body>
</html>
